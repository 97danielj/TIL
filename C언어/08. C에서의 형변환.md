# C에서의 형변환

---

- 형변환이 무엇인지

- 부동소수점에 대해서
- 비트, 바이트에 대하여



C언어에는 고유의 형(type)이 있습니다. 예를 들어, `int a;`로 선언된 변수 a의 형은 int형입니다.

또한 `float c;` 로 선언된 변수 `c` 의 형은 `float` 이고 `double d;` 로 선언된 변수 `d` 의 형은 `double` 이겠죠.



그런데 가끔씩 프로그래밍을 하다 보면 형이 다른 변수 끼리 대입을 하는 연산이 필요로 하게 됩니다. 예를 들어서 `double` 형 변수의 값을 `int` 형 변수에 대입하거나, `float` 형 변수에 `double` 형 변수의 값을 대입하는 것 등등 말이죠.

> 형이 다른 변수 끼리의 대입이나 연산들은 모두 불법이다.

```c
#include <stdio.h>
int main(){
    int a;
    double b;
    
    b = 2.4;
    a = b;
    
    printf("%d", a);
    return 0;
}
```

## 컴퓨터가 실수를 표현하는 원리

---

Pass



## **형 변환(캐스팅)**

어떠한 변수의 형을 바꿀려면 아래와 같이 하면 됩니다

```
 (바꾸려는 형) 변수 이름
```

예를 들어, 위의 경우 `double` 로 선언된 `b` 를 `int` 로 바꾸었으므로 `(int)b` 라 하면 됩니다. 이 때, 형을 바꾼다는 것은 영구적으로 바뀌는 것이 아닙니다. 다시 말해 `double` 인 `b` 를 `int` 로 캐스팅 한다고 해도 `b` 가 `int` 인 변수가 되는 것이 아니라 계산식에서 일시적으로 `int` 형 변수로 바꾼 후 생각하라는 것 이죠. 즉,캐스팅을 하고도

```cpp
printf("%f", b);
```

를 하게 되면 2.4 가 성공적으로 출력됩니다. 위 예제에서 우리는 강제로 형을 변환하였습니다. 따라서 컴파일러는 '아, 이 사람이 마음을 먹고 아예 형이 다른 변수들의 대입을 시도하는 구나' 라고 생각하고 오류 메세지를 출력하지 않게 되는 것 입니다.

```c
/* 두 수의 비율 */
#include <stdio.h>
int main() {
  int a, b;
  float c, d;

  printf("두 숫자 입력 : ");
  scanf("%d %d", &a, &b);

  c = a / b;
  d = (float)a / b;

  printf("두 수의 비율 : %f %f", c, d);

  return 0;
}
```

성공적으로 컴파일 하면 (경고는 나오지만), 예를 들어 5 와 3 을 입력하였을 때 아래와 같이 나옵니다.

실행 결과

```
두 숫자 입력 : 5 3
두 수의 비율 : 1.000000 1.666667
```

와우! 신기하네요. 단지 형변환을 하고 안하고의 차이였지만 두 수의 비율이 하나는 정확하게 나오고 다른 하나는 부정확하게 나오는 군요. 일단, 위 예제에서 관건이 되는 부분은 바로 이 부분입니다.

```cpp
c = a / b;
d = (float)a / b;
```

`c` 에는 `a` 를 `b` 로 나눈 값이 들어갑니다. `d` 에도 마찬가지인데 한 가지 차이점은 `d` 에서는 `a` 를 `float` 변수로 생각해서 계산하라라고 캐스팅 하였습니다. 이 때, 우리가 주목해야 하는 부분은 바로 `a` 와 `b` 가 정수형 변수라는 것 입니다.

컴퓨터에서 `a/b` 는 2 가지의 의미를 가집니다. 만약 `a` 와 `b` 중 어느 하나가 실수형 변수(float, `double)` 이라면 이는 정말 우리가 하는 나눗셈을 수행하게 됩니다. 다시말해 `5/3 = 1.666666666666666666` 이 되는 것 이죠. 하지만 `a` 와 `b` 가 모두 정수형 변수(`char, int, long`) 라면 컴퓨터는 위와 같은 나눗셈 연산을 수행하지 않고 소위 말하는 '몫' 을 계산하게 됩니다. 따라서 `5/3 = 1` 이 되는 것이지요.

따라서, `(float)a/b` 를 하게 되면 컴퓨터가 `a` 를 실수형 변수로 생각해가 되므로 `a/b` 처럼 몫을 계산하지 않고 정말로 실수형 나눗셈을 수행하게 된다는 것입니다. 따라서 `d` 에는 `1.6666 ...` 이 성공적으로 들어갈 수 있게 됩니다.

어때요? 형변환 하나로 많은 결과가 달라지지 않습니까? 실제로 형변환은 C 언어에서 매우 중요한 부분 중 하나 입니다. 또한 쓰임새도 상당히 많은데, 주로 실수형 변수에서 정수 부분만 추출할 때 사용되기도 합니다.

예를 들어 `double a; int b;` 일 때, `b = (int)a;` 라 하게 되면 변수 `a` 의 정수 부분 데이터만 `b` 로 넘어가게 되죠. 물론 `b = a` 로 해도 컴파일러가 알아서 캐스팅을 해주지만 그렇게 된다면 다른 프로그래머가 보았을 때, 이 것이 실수 인건지, 고의로 한 건지 모르므로 오해의 소지가 있습니다.